# LungVision - 胸部X-Ray图像分析系统
## 软件介绍
LungVision是一款专为胸部X-Ray图像分析设计的软件，提供了强大的图像增强和肺叶分割功能。该软件集成了多种图像处理算法，通过直观的用户界面，帮助用户更好地分析和处理胸部X光片，提高诊断效率。

## 主要功能
### 1. 图像增强
提供5种不同的图像增强算法，帮助改善X-Ray图像的质量和可视性：

- 直方图均衡化 ：自动调整图像对比度
- CLAHE（对比度受限的自适应直方图均衡化） ：局部增强图像对比度，避免噪声放大
- 伽马校正 ：调整图像的亮度和对比度
- 非锐化掩蔽 ：增强图像边缘，提高细节可见性
- 小波去噪 ：去除图像噪声，保留重要特征
### 2. 肺叶分割
提供5种不同的分割算法，用于识别和分离肺部区域：

- 阈值分割 ：基于像素强度阈值将图像分割为前景和背景
- 区域生长 ：从种子点开始，逐步将相似像素添加到区域中
- 分水岭分割 ：将图像视为地形表面，识别不同区域边界
- 主动轮廓（Snake算法） ：使用能量最小化的曲线拟合目标边界
- U-Net深度学习分割 ：使用预训练的U-Net模型进行肺部分割
### 3. 其他功能
- 图像加载与显示
- 直方图实时显示
- 处理结果保存
- 参数调整界面
- 处理前后对比
## 安装说明
### 系统要求
- Python 3.7+
- Windows/Linux/macOS
### 安装步骤
1. 克隆或下载项目到本地
```
git clone <repository-url>
```
2. 进入项目目录
```
cd LungVision
```
3. 安装依赖包
```
pip install -r requirements.txt
```
## 使用方法
### 启动软件
```
python main.py
```
### 操作流程
1. 加载图像 ：点击"打开图像"按钮，从文件系统中选择一张胸部X-Ray图像（支持PNG、JPG、JPEG、BMP、TIF格式）。
2. 图像增强 ：
   
   - 从下拉菜单中选择一种增强算法
   - 根据需要调整算法参数
   - 点击"应用增强"按钮
   - 增强后的图像将显示在右侧面板
3. 肺叶分割 ：
   
   - 从下拉菜单中选择一种分割算法
   - 根据需要调整算法参数
   - 点击"应用分割"按钮
   - 分割结果将显示在右侧面板
4. 保存结果 ：点击"保存结果"按钮，选择保存位置和格式。
5. 重置 ：点击"重置"按钮清除当前处理结果，返回到原始状态。
## 算法说明
### 增强算法
1. 直方图均衡化 ：通过重新分配图像的灰度值分布，提高整体对比度。适用于对比度较低的图像。
2. CLAHE ：在小区域内应用直方图均衡化，并限制对比度放大，避免噪声过度放大。参数包括：
   
   - 对比度限制：控制对比度增强的程度
   - 网格大小：定义局部区域的大小
3. 伽马校正 ：通过非线性变换调整图像亮度。参数包括：
   
   - 伽马值：控制亮度调整的程度（<1使暗区更亮，>1使亮区更暗）
4. 非锐化掩蔽 ：通过从原始图像中减去模糊版本来增强边缘。参数包括：
   
   - 半径：高斯模糊的半径
   - 强度：锐化的程度
5. 小波去噪 ：使用小波变换分解图像，去除噪声分量后重建。参数包括：
   
   - 阈值：控制去噪强度
   - 小波类型：使用的小波函数类型
### 分割算法
1. 阈值分割 ：将灰度值高于阈值的像素分为一类，低于阈值的分为另一类。参数包括：
   
   - 阈值：分割的灰度值界限
   - 阈值类型：二值化方法（普通、反转、截断等）
2. 区域生长 ：从用户指定的种子点开始，将相似的邻近像素添加到区域中。参数包括：
   
   - 种子点：生长起始位置
   - 阈值：相似性判断标准
3. 分水岭分割 ：将图像视为地形表面，通过模拟水的流动来识别区域边界。参数包括：
   
   - 距离阈值：控制分割的精细程度
4. 主动轮廓 ：使用能量最小化的曲线逐步拟合目标边界。参数包括：
   
   - 迭代次数：轮廓演化的步数
   - Alpha：控制曲线的弹性
   - Beta：控制曲线的刚性
5. U-Net分割 ：使用深度学习模型自动识别肺部区域。参数包括：
   
   - 模型类型：预训练或自定义模型
   - 置信度：分割结果的可信度阈值

以下是项目所需的主要依赖包，详细列表请参见 requirements.txt 文件：

```
PyQt5>=5.15.0
opencv-python>=4.5.0
numpy>=1.19.0
matplotlib>=3.3.0
scikit-image>=0.17.0
PyWavelets>=1.1.0
```

## 注意事项
1. 软件目前仅支持灰度图像处理，彩色图像会自动转换为灰度图。
2. U-Net分割算法为模拟实现，实际应用中需要训练或加载真实的深度学习模型。
3. 处理大尺寸图像时可能需要较长时间，请耐心等待。
4. 建议在增强后再进行分割，以获得更好的分割效果。
## 开发者信息
LungVision是一个用于教育和研究目的的开源项目，欢迎贡献代码和提出改进建议。