# 图像增强算法说明

## 1. 直方图均衡化

### 原理
直方图均衡化是一种简单而有效的图像增强技术，通过重新分配图像的灰度值分布，使其在整个灰度范围内更加均匀，从而提高图像的整体对比度。

### 算法步骤
1. 计算图像的灰度直方图
2. 计算累积分布函数(CDF)
3. 将CDF归一化到[0,255]范围
4. 根据映射关系重新分配像素值

### 参数
该算法不需要设置参数，可直接应用。

### 适用场景
- 对比度较低的X-Ray图像
- 灰度分布集中在某一区域的图像
- 需要快速增强图像整体可见性的场合

### 优缺点
**优点**：
- 实现简单，计算速度快
- 可以自动增强图像对比度

**缺点**：
- 可能会过度增强噪声
- 无法针对局部区域进行增强
- 可能导致某些细节丢失

## 2. 自适应直方图均衡化(CLAHE)

### 原理
CLAHE（对比度受限的自适应直方图均衡化）是直方图均衡化的改进版本，它将图像分割成多个小块，在每个小块上分别应用直方图均衡化，然后使用双线性插值合并结果。同时，它限制了对比度放大的程度，避免了噪声的过度放大。这种局部自适应的方法能够更好地保留图像的局部细节和边缘信息。

### 算法步骤
1. 将图像分割成大小为 grid_size × grid_size 的多个小块
2. 对每个小块计算直方图
3. 应用对比度限制（clip_limit），将超出限制的部分重新分配到直方图的所有区间
4. 对每个小块应用直方图均衡化
5. 使用双线性插值合并各个小块的结果，消除块之间的边界效应
6. 输出增强后的图像

### 参数
- **对比度限制(Clip Limit)**：控制对比度增强的程度，取值范围通常为1.0-4.0
  - 值越大，对比度越强，但噪声也可能更明显
  - 值越小，对比度增强效果越温和，噪声放大越少
  - 默认值：2.0
- **网格大小(Grid Size)**：定义局部区域的大小，取值范围通常为2-16
  - 较小的值会使增强更加局部化，更好地适应局部变化
  - 较大的值效果接近全局直方图均衡化
  - 默认值：8

### 适用场景
- 需要保留局部细节的X-Ray胸部图像
- 光照不均匀的医学图像
- 噪声较多但仍需增强对比度的图像
- 灰度分布不均匀的图像
- 需要突出显示组织边界和微小结构的医学影像

### 优缺点
**优点**：
- 可以局部增强图像对比度，适应不同区域的亮度变化
- 通过对比度限制机制有效控制噪声放大
- 保留更多图像细节和边缘信息
- 对光照不均匀的图像效果特别好
- 增强后的图像视觉效果自然

**缺点**：
- 计算复杂度高于普通直方图均衡化
- 参数选择需要经验，不同类型的图像可能需要不同的参数设置
- 过高的对比度限制可能导致图像噪声被放大
- 过小的网格大小可能导致图像出现块状伪影

## 3. 伽马校正

### 原理
伽马校正是一种非线性操作，通过幂律变换调整图像的亮度和对比度。公式为：输出 = 输入^γ（归一化后）。

### 算法步骤
1. 将图像像素值归一化到[0,1]范围
2. 应用幂律变换：输出 = 输入^γ
3. 将结果缩放回[0,255]范围

### 参数
- **伽马值(Gamma)**：控制亮度调整的程度
  - γ < 1：增加暗区细节，使图像整体变亮
  - γ > 1：增加亮区细节，使图像整体变暗
  - γ = 1：不产生变化

### 适用场景
- 过暗或过亮的X-Ray图像
- 需要增强特定亮度区域细节的图像
- 需要进行非线性亮度调整的场合

### 优缺点
**优点**：
- 简单直观，易于理解和实现
- 可以有效调整图像亮度
- 可以增强特定亮度区域的细节

**缺点**：
- 不适合同时处理过亮和过暗区域
- 可能导致某些区域细节丢失

## 4. 非锐化掩蔽

### 原理
非锐化掩蔽通过从原始图像中减去其模糊版本，然后将差异加回原图，从而增强边缘和细节。

### 算法步骤
1. 对原始图像应用高斯模糊，得到模糊图像
2. 计算原始图像与模糊图像的差异（掩蔽）
3. 将加权后的差异加回原始图像

### 参数
- **半径(Radius)**：高斯模糊的半径，控制增强的细节尺度，较大的值会增强更大尺度的边缘
- **强度(Amount)**：锐化的程度，值越大，边缘增强越明显

### 适用场景
- 需要增强边缘和细节的X-Ray图像
- 模糊的图像
- 需要突出显示结构边界的场合

### 优缺点
**优点**：
- 可以有效增强边缘和细节
- 保留图像整体亮度
- 参数直观易调整

**缺点**：
- 可能会放大噪声
- 过度锐化可能产生伪影

## 5. 小波去噪

### 原理
小波去噪利用小波变换将图像分解为不同频率和尺度的分量，通过阈值处理去除噪声分量，然后重建图像。

### 算法步骤
1. 对图像进行小波分解，得到近似系数和细节系数
2. 对细节系数应用阈值处理，去除噪声
3. 使用处理后的系数重建图像

### 参数
- **阈值(Threshold)**：控制去噪强度，值越大，去噪效果越强，但可能会丢失更多细节
- **小波类型(Wavelet)**：使用的小波函数类型，不同类型适合不同特征的图像

### 适用场景
- 含有噪声的X-Ray图像
- 需要在保留边缘和细节的同时去除噪声的场合
- 需要高质量图像处理的医学分析

### 优缺点
**优点**：
- 可以有效去除噪声同时保留边缘
- 多尺度分析能力强
- 适合处理不同类型的噪声

**缺点**：
- 计算复杂度高
- 参数选择需要专业知识
- 不当的参数设置可能导致图像失真